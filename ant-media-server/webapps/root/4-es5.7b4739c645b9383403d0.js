!function(){function e(){var t=S([":@@newUserCreateButton\u241f38a26d7db25acc2c4f8cd99a4c25ffdf833e450a\u241f7931405919512135267:",":START_ITALIC_TEXT:",":CLOSE_ITALIC_TEXT:Create"]);return e=function(){return t},t}function t(){var e=S([":@@newUserCancelButton\u241fd7b35c384aecd25a516200d6921836374613dfe7\u241f2159130950882492111:Cancel"]);return t=function(){return e},e}function n(){var e=S([":@@password_place_holder\u241fc32ef07f8803a223a83ed17024b38e8d82292407\u241f1431416938026210429:Password"]);return n=function(){return e},e}function i(){var e=S([":@@newPassword\u241fc1b7e6d75ff4285c7636c67e5ef259629b81725b\u241f3241357959735682038:Confirm Password"]);return i=function(){return e},e}function s(){var e=S([":@@registerUserFullName\u241fcc5cd1e1a1cff588a65560a1a573f7f283740b06\u241f5065475369645510341:Last Name",":START_TAG_SPAN:*",":CLOSE_TAG_SPAN:"]);return s=function(){return e},e}function a(){var e=S([":@@registerUserFullName\u241f96a5e3b178d6eab5b55ac3c4eafb542d4042324c\u241f7209368475121981189:First Name",":START_TAG_SPAN:*",":CLOSE_TAG_SPAN:"]);return a=function(){return e},e}function r(){var e=S([":@@newUserButton\u241fa97864c21cd0327003f0b0aa23e426f7c8a9857f\u241f2750332368858308630:New User "]);return r=function(){return e},e}function c(){var e=S([":@@broadcastNameIsRequired\u241f2935f254a8da07a44a156de5a0a9e7fcde26af92\u241f1710446914149843457: License key should be at least 4 characters. "]);return c=function(){return e},e}function o(){var e=S([":@@saveForm\u241f52c9a103b812f258bcddc3d90a6e3f46871d25fe\u241f3768927257183755959:Save"]);return o=function(){return e},e}function l(){var e=S([":user settings |log@@LogTabHeader\u241fc788cac76d243927421aae8cc4e9a73d102e39b6\u241f4832842301452906736:Users"]);return l=function(){return e},e}function u(){var e=S([":licence key settings licence | @@LicenceTabHeader\u241f39d434c3e1e0988a1585ca45293147f1ffc504c8\u241f5385767692216459316:General "]);return u=function(){return e},e}function b(){var e=S([":@@newLiveStreamSaveButton\u241f49019640af78cddd3b21bc3584f1499e5d8ed91b\u241f5740235461931807510:",":START_ITALIC_TEXT:",":CLOSE_ITALIC_TEXT:Save"]);return b=function(){return e},e}function d(){var e=S([":@@newPassword\u241fa80ca2c8cdd5c57ec276e5917673c562a988ac04\u241f8663553932392094435:New Password(Again)"]);return d=function(){return e},e}function f(){var e=S([":@@password_place_holder\u241fc32ef07f8803a223a83ed17024b38e8d82292407\u241f1431416938026210429:Password"]);return f=function(){return e},e}function g(){var e=S([":@@newPassword\u241fc7014c6360e94b236286b869c3fe0ea9911c0387\u241f1221596867309460035:New Password"]);return g=function(){return e},e}function p(){var e=S([":@@newLiveStreamCancelButton\u241fd7b35c384aecd25a516200d6921836374613dfe7\u241f2159130950882492111:Cancel"]);return p=function(){return e},e}function v(){var e=S([":@@editUserCardTitle\u241f5371b1c5378106a120214f43b1646d08f9b16d58\u241f4111930681756918380: Edit User "]);return v=function(){return e},e}function S(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{UO6m:function(S,m,R){"use strict";R.d(m,"a",(function(){return Ve}));var C,w,E,T,I=R("lTdr"),L=R("XGgE"),B=R("OLhb"),M=R("U/Bw"),U=R("eikZ"),q=R("+0xr"),N=R("0IaG"),x=R("fXoL"),k=R("3Pt+"),A=R("ofXK"),O=((C=function(){function e(t,n){h(this,e),this.validateEqual=t,this.reverse=n}return y(e,[{key:"validate",value:function(e){var t=e.value,n=e.root.get(this.validateEqual);return n&&t!==n.value&&!this.isReverse?{validateEqual:!1}:(n&&t===n.value&&this.isReverse&&(delete n.errors.validateEqual,Object.keys(n.errors).length||n.setErrors(null)),n&&t!==n.value&&this.isReverse&&n.setErrors({validateEqual:!1}),null)}},{key:"isReverse",get:function(){return!!this.reverse&&"true"===this.reverse}}]),e}()).\u0275fac=function(e){return new(e||C)(x.cc("validateEqual"),x.cc("reverse"))},C.\u0275dir=x.Hb({type:C,selectors:[["","validateEqual","","formControlName",""],["","validateEqual","","formControl",""],["","validateEqual","","ngModel",""]],features:[x.Ab([{provide:k.h,useExisting:Object(x.V)((function(){return C})),multi:!0}])]}),C);w=$localize(v()),E=$localize(p()),T=$localize(g());var P,_,D=["placeholder",$localize(f())];function F(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div",9),x.Sb(1,"label"),x.Wb(2,T),x.Rb(),x.Sb(3,"input",17,18),x.Xb(5,D),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().userEditing.newPassword=e})),x.Rb(),x.Sb(6,"small",19),x.Jc(7," Password is required and at least 6 characters "),x.Rb(),x.Rb()}if(2&e){var i=x.xc(4),s=x.jc(),a=x.xc(2);x.Bb(3),x.qc("required",s.userEditing.newPassword)("ngModel",s.userEditing.newPassword),x.Bb(3),x.qc("hidden",i.valid||!a.submitted)}}function j(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div",9),x.Sb(1,"label"),x.Wb(2,P),x.Rb(),x.Sb(3,"input",20,21),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().newPasswordAgain=e})),x.Rb(),x.Sb(5,"small",19),x.Jc(6," Passwords should match "),x.Rb(),x.Rb()}if(2&e){var i=x.xc(4),s=x.jc(),a=x.xc(2);x.Bb(3),x.qc("required",s.changePassword)("ngModel",s.newPasswordAgain),x.Bb(2),x.qc("hidden",i.valid||!a.submitted)}}function J(e,t){if(1&e&&(x.Sb(0,"option",11),x.Jc(1),x.Rb()),2&e){var n=t.$implicit;x.qc("value",n),x.Bb(1),x.Lc(" ",n," ")}}function z(e,t){if(1&e){var n=x.Tb();x.Sb(0,"select",10),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().userEditing.scope=e})),x.Sb(1,"option",11),x.Jc(2,"Everything"),x.Rb(),x.Hc(3,J,2,2,"option",22),x.Rb()}if(2&e){var i=x.jc();x.qc("name","ApplicationPermission")("ngModel",i.userEditing.scope),x.Bb(1),x.rc("value",i.SYSTEM_SCOPE_OF_ACCESS),x.Bb(2),x.qc("ngForOf",i.applications.applications)}}function H(e,t){1&e&&(x.ac(0,_,1),x.Nb(1,"i",23),x.Yb())}P=$localize(d()),_=$localize(b(),"\ufffd*31:1\ufffd\ufffd#1:1\ufffd","\ufffd/#1:1\ufffd\ufffd/*31:1\ufffd");var K,W=((K=function(){function e(t,n,i){h(this,e),this.dialogRef=t,this.restService=n,this.data=i,this.loading=!1,this.userUpdating=!1,this.userNameEmpty=!1,this.changePassword=!1,this.newPasswordAgain="",this.AdminUserType="ADMIN",this.ReadOnlyUserType="READ_ONLY",this.BasicUserType="USER",this.SYSTEM_SCOPE_OF_ACCESS="system",console.debug(i.email+" - "+i.type),this.userEditing=new M.f(i.email,""),this.userEditing.scope=i.scope,this.userEditing.userType=i.type}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.restService.getApplications().subscribe((function(t){e.applications=t}),(function(e){Object(M.g)(e)}))}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"updateUser",value:function(e){var t=this;e&&(this.restService.checkStreamName(this.userEditing.email)?(console.log("user pass word "+this.userEditing.newPassword),""!=this.userEditing.newPassword&&null!=this.userEditing.newPassword&&(this.userEditing.newPassword=Object(B.e)(this.userEditing.newPassword)),this.userUpdating=!0,this.restService.editUser(this.userEditing).subscribe((function(e){console.log("data :"+JSON.stringify(e)),t.userUpdating=!1,e.success?($.notify({icon:"ti-save",message:"User is updated"},{type:"success",delay:900,placement:{from:"top",align:"right"}}),t.dialogRef.close()):$.notify({icon:"ti-alert",message:"User is not updated: "+e.message+" "+e.errorId},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}),(function(e){Object(M.g)(e),t.userUpdating=!1}))):this.userNameEmpty=!0)}},{key:"cancelEditLiveStream",value:function(){this.dialogRef.close()}}]),e}()).\u0275fac=function(e){return new(e||K)(x.Mb(N.g),x.Mb(M.e),x.Mb(N.a))},K.\u0275cmp=x.Gb({type:K,selectors:[["user-edit-dialog"]],decls:34,vars:14,consts:[["method","post","validate","",3,"ngSubmit"],["f","ngForm"],[1,"card-content",2,"padding-top","0px"],[1,"card-title","text-left"],[1,"card-content"],[1,"checkbox"],["enabled","","id","change_password","name","change_password","type","checkbox",3,"ngModel","ngModelChange"],["for","change_password"],["class","form-group text-left",4,"ngIf"],[1,"form-group","text-left"],["type","text","required","",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange"],[3,"value"],["type","text","class","dropdown-toggle form-control","required","",3,"name","ngModel","ngModelChange",4,"ngIf"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-fill","btn-success",3,"disabled"],["class","fa fa-spinner fa-pulse fa-1x fa-fw","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-simple",3,"click"],["type","password","name","password","minlength","6","validateEqual","password_again","reverse","true",1,"form-control",3,"required","ngModel","ngModelChange",6,"placeholder"],["password","ngModel"],[1,"text-danger",3,"hidden"],["type","password","name","password_again","minlength","6","placeholder","Password","reverse","false","validateEqual","password",1,"form-control",3,"required","ngModel","ngModelChange"],["password_again","ngModel"],[3,"value",4,"ngFor","ngForOf"],["aria-hidden","true",1,"fa","fa-spinner","fa-pulse","fa-1x","fa-fw"]],template:function(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div"),x.Sb(1,"form",0,1),x.fc("ngSubmit",(function(){x.zc(n);var e=x.xc(2);return t.updateUser(e.valid)})),x.Sb(3,"div",2),x.Sb(4,"h4",3),x.Wb(5,w),x.Rb(),x.Rb(),x.Sb(6,"div",4),x.Sb(7,"div",5),x.Sb(8,"input",6),x.fc("ngModelChange",(function(e){return t.changePassword=e})),x.Rb(),x.Sb(9,"label",7),x.Jc(10," Change Password "),x.Rb(),x.Rb(),x.Hc(11,F,8,3,"div",8),x.Hc(12,j,7,3,"div",8),x.Sb(13,"fieldset"),x.Sb(14,"div",9),x.Sb(15,"label"),x.Jc(16,"User type"),x.Rb(),x.Sb(17,"select",10),x.fc("ngModelChange",(function(e){return t.userEditing.userType=e})),x.Sb(18,"option",11),x.Jc(19),x.Rb(),x.Sb(20,"option",11),x.Jc(21),x.Rb(),x.Sb(22,"option",11),x.Jc(23),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(24,"div",9),x.Sb(25,"label"),x.Jc(26,"Scope of Access"),x.Rb(),x.Hc(27,z,4,4,"select",12),x.Rb(),x.Sb(28,"div",13),x.Sb(29,"button",14),x.ac(30,_),x.Hc(31,H,2,0,"i",15),x.Yb(),x.Rb(),x.Sb(32,"button",16),x.fc("click",(function(){return t.cancelEditLiveStream()})),x.Wb(33,E),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}2&e&&(x.Bb(8),x.qc("ngModel",t.changePassword),x.Bb(3),x.qc("ngIf",t.changePassword),x.Bb(1),x.qc("ngIf",t.changePassword),x.Bb(5),x.qc("name","UserType")("ngModel",t.userEditing.userType),x.Bb(1),x.rc("value",t.AdminUserType),x.Bb(1),x.Kc(t.AdminUserType),x.Bb(1),x.rc("value",t.BasicUserType),x.Bb(1),x.Kc(t.BasicUserType),x.Bb(1),x.rc("value",t.ReadOnlyUserType),x.Bb(1),x.Kc(t.ReadOnlyUserType),x.Bb(4),x.qc("ngIf",t.applications),x.Bb(2),x.qc("disabled",t.userUpdating),x.Bb(2),x.qc("ngIf",t.userUpdating))},directives:[k.x,k.l,k.m,k.a,k.k,k.n,A.o,k.u,k.t,k.o,k.w,k.d,k.g,O,A.n],encapsulation:2}),K);R("4XzM"),R("S7rW");var Y,Q,G,X,V,Z,ee,te,ne=R("tk/3"),ie=R("tyNb"),se=R("Qu3c"),ae=["sslConfigurationSelect"],re=["class","settings"];function ce(e,t){1&e&&(x.Sb(0,"div",24),x.Sb(1,"p",37),x.Nb(2,"i",38),x.Jc(3," Please wait.."),x.Rb(),x.Rb())}function oe(e,t){if(1&e&&(x.Sb(0,"div",24),x.Sb(1,"p",37),x.Nb(2,"i",39),x.Jc(3),x.Rb(),x.Sb(4,"small",40),x.Jc(5),x.Rb(),x.Rb()),2&e){var n=x.jc(3);x.Bb(3),x.Lc(" ",n.licenseStatus," "),x.Bb(2),x.Kc(n.licenseStatusExplaination)}}function le(e,t){if(1&e&&(x.Sb(0,"div",24),x.Sb(1,"p",37),x.Nb(2,"i",38),x.Jc(3),x.Rb(),x.Rb()),2&e){var n=x.jc(3);x.Bb(3),x.Lc(" ",n.licenseStatus,"..")}}function ue(e,t){if(1&e&&(x.Sb(0,"div",24),x.Sb(1,"p",37),x.Nb(2,"i",41),x.Jc(3),x.Rb(),x.Rb()),2&e){var n=x.jc(3);x.Bb(3),x.Nc(" Owner : ",n.currentLicence.owner," | Until : ",n.currentLicence.endDate," ",n._messageReceived,"")}}function be(e,t){if(1&e&&(x.Sb(0,"div",35),x.Sb(1,"label",23),x.Jc(2,"License Status"),x.Rb(),x.Hc(3,ce,4,0,"div",36),x.Hc(4,oe,6,2,"div",36),x.Hc(5,le,4,1,"div",36),x.Hc(6,ue,4,3,"div",36),x.Rb()),2&e){var n=x.jc(2);x.Bb(3),x.qc("ngIf",n.licenseStatusReceiving),x.Bb(1),x.qc("ngIf",!n.licenseStatusReceiving&&("Invalid"===n.licenseStatus||"Suspended"===n.licenseStatus||"Expired"===n.licenseStatus||"Trial expired"===n.licenseStatus)),x.Bb(1),x.qc("ngIf",!n.licenseStatusReceiving&&"Getting license status"===n.licenseStatus),x.Bb(1),x.qc("ngIf",!n.licenseStatusReceiving&&"Valid"===n.licenseStatus)}}function de(e,t){if(1&e){var n=x.Tb();x.Sb(0,"fieldset"),x.Sb(1,"div",22),x.Sb(2,"label",23),x.Jc(3,"License Key"),x.Rb(),x.Sb(4,"div",42),x.Sb(5,"input",43,44),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc(2).serverSettings.licenceKey=e})),x.Rb(),x.Sb(7,"small",45),x.Wb(8,X),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){var i=x.xc(6);x.jc();var s=x.xc(3),a=x.jc();x.Bb(5),x.qc("ngModel",a.serverSettings.licenceKey),x.Bb(2),x.qc("hidden",i.valid||!s.submitted)}}function fe(e,t){if(1&e&&(x.Sb(0,"fieldset"),x.Sb(1,"div",22),x.Sb(2,"label",23),x.Jc(3,"Hour Used "),x.Sb(4,"a",46),x.Nb(5,"i",47),x.Rb(),x.Rb(),x.Sb(6,"div",42),x.Sb(7,"p",37),x.Nb(8,"i",48),x.Jc(9),x.Rb(),x.Rb(),x.Rb(),x.Rb()),2&e){var n=x.jc(2);x.Bb(4),x.sc("href","https://license.antmedia.io/?licenseId=",n.serverSettings.licenceKey,"",x.Ac),x.Bb(5),x.Lc(" ",n.currentLicence.hourUsed," ")}}function ge(e,t){1&e&&(x.Sb(0,"p"),x.Jc(1," The Ant Media Server Enterprise Marketplace Edition is all set - no license activation required. Enjoy! "),x.Rb())}function pe(e,t){1&e&&(x.Sb(0,"p"),x.Jc(1," This is the Ant Media Server Community Edition - no license activation required. Enjoy! "),x.Rb())}function ve(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div",27),x.Sb(1,"div"),x.Sb(2,"form",28,29),x.fc("ngSubmit",(function(){x.zc(n);var e=x.xc(3);return x.jc().changeServerSettings(e.valid)})),x.Sb(4,"fieldset"),x.Hc(5,be,7,4,"div",30),x.Rb(),x.Hc(6,de,9,2,"fieldset",26),x.Sb(7,"fieldset"),x.Sb(8,"div",22),x.Sb(9,"label",23),x.Jc(10,"Log Status"),x.Rb(),x.Sb(11,"div",24),x.Sb(12,"select",31),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().logLevelChanged(e)}))("ngModelChange",(function(e){return x.zc(n),x.jc().serverSettings.logLevel=e})),x.Sb(13,"option",32),x.Jc(14),x.Rb(),x.Sb(15,"option",32),x.Jc(16),x.Rb(),x.Sb(17,"option",32),x.Jc(18),x.Rb(),x.Sb(19,"option",32),x.Jc(20),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Hc(21,fe,10,2,"fieldset",26),x.Sb(22,"fieldset"),x.Sb(23,"div",33),x.Sb(24,"button",34),x.Wb(25,G),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Hc(26,ge,2,0,"p",26),x.Hc(27,pe,2,0,"p",26),x.Rb()}if(2&e){var i=x.jc();x.Bb(5),x.qc("ngIf",!i.serverSettings.buildForMarket&&i.isEnterpriseEdition),x.Bb(1),x.qc("ngIf",!i.serverSettings.buildForMarket&&i.isEnterpriseEdition),x.Bb(6),x.qc("name","resolutionHeight")("ngModel",i.serverSettings.logLevel),x.Bb(1),x.rc("value",i.logLevelInfo),x.Bb(1),x.Kc(i.logLevelInfo),x.Bb(1),x.rc("value",i.logLevelWarn),x.Bb(1),x.Kc(i.logLevelWarn),x.Bb(1),x.rc("value",i.logLevelError),x.Bb(1),x.Kc(i.logLevelError),x.Bb(1),x.rc("value",i.logLevelOff),x.Bb(1),x.Kc(i.logLevelOff),x.Bb(1),x.qc("ngIf",i.isEnterpriseEdition&&!i.serverSettings.buildForMarket&&"hourly"===i.currentLicence.type),x.Bb(5),x.qc("ngIf",i.isEnterpriseEdition&&i.serverSettings.buildForMarket),x.Bb(1),x.qc("ngIf",!i.isEnterpriseEdition)}}function Se(e,t){if(1&e){var n=x.Tb();x.Sb(0,"button",49),x.fc("click",(function(){return x.zc(n),x.jc().newUser()})),x.Wb(1,V),x.Rb()}}Y=$localize(u()),Q=$localize(l()),G=$localize(o()),X=$localize(c()),V=$localize(r()),Z=$localize(a(),"\ufffd#10\ufffd","\ufffd/#10\ufffd"),ee=$localize(s(),"\ufffd#18\ufffd","\ufffd/#18\ufffd"),te=$localize(i());var he,me,ye=["placeholder",$localize(n())];function Re(e,t){if(1&e&&(x.Sb(0,"option"),x.Jc(1),x.Rb()),2&e){var n=t.$implicit;x.Bb(1),x.Lc(" ",n," ")}}function Ce(e,t){1&e&&(x.ac(0,me,1),x.Nb(1,"i",38),x.Yb())}function we(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div",4),x.Sb(1,"form",50,29),x.fc("ngSubmit",(function(){x.zc(n);var e=x.xc(2);return x.jc().createUser(e.valid)})),x.Sb(3,"div",51),x.Sb(4,"h4",52),x.Jc(5," New User "),x.Rb(),x.Rb(),x.Sb(6,"div",53),x.Sb(7,"div",22),x.Sb(8,"label"),x.ac(9,Z),x.Nb(10,"span",54),x.Yb(),x.Rb(),x.Sb(11,"input",55,56),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().User.firstName=e})),x.Rb(),x.Sb(13,"small",45),x.Jc(14," First name is required "),x.Rb(),x.Rb(),x.Sb(15,"div",35),x.Sb(16,"label"),x.ac(17,ee),x.Nb(18,"span",54),x.Yb(),x.Rb(),x.Sb(19,"input",57,58),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().User.lastName=e})),x.Rb(),x.Sb(21,"small",45),x.Jc(22," Last name is required "),x.Rb(),x.Rb(),x.Sb(23,"div",35),x.Sb(24,"label"),x.Jc(25,"Username (E-mail)"),x.Rb(),x.Sb(26,"input",59,60),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().User.email=e})),x.Rb(),x.Sb(28,"small",45),x.Jc(29," E-mail is required in correct form. "),x.Rb(),x.Rb(),x.Sb(30,"div",35),x.Sb(31,"label"),x.Jc(32,"Password"),x.Rb(),x.Sb(33,"input",61,62),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().User.password=e})),x.Rb(),x.Sb(35,"small",45),x.Jc(36," Password should be at least 6 characters. "),x.Rb(),x.Rb(),x.Sb(37,"div",35),x.Sb(38,"label"),x.Wb(39,te),x.Rb(),x.Sb(40,"input",63,64),x.Xb(42,ye),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().confirmPasswordModel=e})),x.Rb(),x.Sb(43,"small",45),x.Jc(44," Passwords should match "),x.Rb(),x.Rb(),x.Sb(45,"div",35),x.Sb(46,"label"),x.Jc(47,"User type \xa0"),x.Nb(48,"i",65),x.Rb(),x.Sb(49,"select",31),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().User.userType=e})),x.Sb(50,"option",32),x.Jc(51),x.Rb(),x.Sb(52,"option",32),x.Jc(53),x.Rb(),x.Sb(54,"option",32),x.Jc(55),x.Rb(),x.Rb(),x.Rb(),x.Sb(56,"div",35),x.Sb(57,"label"),x.Jc(58,"Scope of Access \xa0"),x.Nb(59,"i",66),x.Rb(),x.Sb(60,"select",31),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().User.scope=e})),x.Sb(61,"option",32),x.Jc(62,"Everything"),x.Rb(),x.Hc(63,Re,2,1,"option",67),x.Rb(),x.Rb(),x.Sb(64,"div",33),x.Sb(65,"button",68),x.ac(66,me),x.Hc(67,Ce,2,0,"i",69),x.Yb(),x.Rb(),x.Sb(68,"button",70),x.fc("click",(function(){return x.zc(n),x.jc().cancelNewUser()})),x.Wb(69,he),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}if(2&e){var i=x.xc(2),s=x.xc(12),a=x.xc(20),r=x.xc(27),c=x.xc(34),o=x.xc(41),l=x.jc();x.Bb(11),x.qc("ngModel",l.User.firstName),x.Bb(2),x.qc("hidden",s.valid||s.pristine&&!i.submitted),x.Bb(6),x.qc("ngModel",l.User.lastName),x.Bb(2),x.qc("hidden",a.valid||a.pristine&&!i.submitted),x.Bb(5),x.qc("ngModel",l.User.email),x.Bb(2),x.qc("hidden",r.valid||r.pristine&&!i.submitted),x.Bb(5),x.qc("ngModel",l.User.password),x.Bb(2),x.qc("hidden",c.valid||c.pristine&&!i.submitted),x.Bb(5),x.qc("ngModel",l.confirmPasswordModel),x.Bb(3),x.qc("hidden",o.valid||!i.submitted),x.Bb(6),x.qc("name","UserType")("ngModel",l.User.userType),x.Bb(1),x.rc("value",l.AdminUserType),x.Bb(1),x.Kc(l.AdminUserType),x.Bb(1),x.rc("value",l.BasicUserType),x.Bb(1),x.Kc(l.BasicUserType),x.Bb(1),x.rc("value",l.ReadOnlyUserType),x.Bb(1),x.Kc(l.ReadOnlyUserType),x.Bb(5),x.qc("name","ApplicationPermission")("ngModel",l.User.scope),x.Bb(1),x.rc("value",l.SYSTEM_SCOPE_OF_ACCESS),x.Bb(2),x.qc("ngForOf",l.applications.applications),x.Bb(2),x.qc("disabled",l.newUserCreating),x.Bb(2),x.qc("ngIf",l.newUserCreating)}}function Ee(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div",71),x.Sb(1,"div",72),x.Sb(2,"input",73),x.fc("keyup",(function(e){return x.zc(n),x.jc().applyFilter(e.target.value)})),x.Rb(),x.Rb(),x.Rb()}}function Te(e,t){1&e&&(x.Sb(0,"mat-header-cell",87),x.Jc(1,"Username"),x.Rb()),2&e&&x.qc("ngClass","email-column")}function Ie(e,t){1&e&&(x.Qb(0),x.Jc(1," [No Name] "),x.Pb())}function Le(e,t){if(1&e&&(x.Sb(0,"mat-cell",88),x.Sb(1,"div",89),x.Jc(2),x.Hc(3,Ie,2,0,"ng-container",26),x.Rb(),x.Rb()),2&e){var n=t.$implicit;x.qc("ngClass","email-column"),x.Bb(2),x.Lc(" ",n.email," "),x.Bb(1),x.qc("ngIf",!n.email||0==n.email.length)}}function Be(e,t){1&e&&(x.Sb(0,"mat-header-cell",87),x.Jc(1," User Type \xa0"),x.Nb(2,"i",65),x.Rb()),2&e&&x.qc("ngClass","type-column")}function Me(e,t){if(1&e&&(x.Sb(0,"mat-cell",88),x.Sb(1,"div",89),x.Jc(2),x.Rb(),x.Rb()),2&e){var n=t.$implicit;x.qc("ngClass","type-column"),x.Bb(2),x.Lc(" ",n.userType," ")}}function Ue(e,t){1&e&&(x.Sb(0,"mat-header-cell",87),x.Jc(1," Scope of Access \xa0"),x.Nb(2,"i",66),x.Rb()),2&e&&x.qc("ngClass","permissions-column")}function qe(e,t){1&e&&(x.Qb(0),x.Jc(1," Everything "),x.Pb())}function Ne(e,t){1&e&&(x.Qb(0),x.Jc(1," Everything "),x.Pb())}function xe(e,t){if(1&e&&(x.Qb(0),x.Jc(1),x.Pb()),2&e){var n=x.jc().$implicit;x.Bb(1),x.Lc(" ",n.scope," ")}}function ke(e,t){if(1&e&&(x.Sb(0,"mat-cell",88),x.Sb(1,"div",89),x.Qb(2,90),x.Hc(3,qe,2,0,"ng-container",91),x.Hc(4,Ne,2,0,"ng-container",91),x.Hc(5,xe,2,1,"ng-container",92),x.Pb(),x.Rb(),x.Rb()),2&e){var n=t.$implicit;x.qc("ngClass","permissions-column"),x.Bb(2),x.qc("ngSwitch",n.scope),x.Bb(1),x.qc("ngSwitchCase","system")}}function Ae(e,t){1&e&&(x.Sb(0,"mat-header-cell",93),x.Jc(1," Actions "),x.Rb())}function Oe(e,t){if(1&e){var n=x.Tb();x.Sb(0,"mat-cell",93),x.Sb(1,"button",94),x.fc("click",(function(){x.zc(n);var e=t.$implicit;return x.jc(2).changeType(e)})),x.Sb(2,"span",95),x.Nb(3,"i",96),x.Rb(),x.Ob(4),x.Rb(),x.Sb(5,"button",97),x.fc("click",(function(){x.zc(n);var e=t.$implicit;return x.jc(2).deleteUser(e.email)})),x.Sb(6,"span",95),x.Nb(7,"i",98),x.Rb(),x.Rb(),x.Rb()}}function Pe(e,t){1&e&&x.Nb(0,"mat-header-row")}function _e(e,t){1&e&&x.Nb(0,"mat-row")}function De(e,t){if(1&e&&(x.Sb(0,"div",74),x.Sb(1,"div",75),x.Sb(2,"mat-table",76),x.Qb(3,77),x.Hc(4,Te,2,1,"mat-header-cell",78),x.Hc(5,Le,4,3,"mat-cell",79),x.Pb(),x.Qb(6,80),x.Hc(7,Be,3,1,"mat-header-cell",78),x.Hc(8,Me,3,2,"mat-cell",79),x.Pb(),x.Qb(9,81),x.Hc(10,Ue,3,1,"mat-header-cell",78),x.Hc(11,ke,6,3,"mat-cell",79),x.Pb(),x.Qb(12,82),x.Hc(13,Ae,2,0,"mat-header-cell",83),x.Hc(14,Oe,8,0,"mat-cell",84),x.Pb(),x.Hc(15,Pe,1,0,"mat-header-row",85),x.Hc(16,_e,1,0,"mat-row",86),x.Rb(),x.Rb(),x.Rb()),2&e){var n=x.jc();x.Bb(2),x.qc("dataSource",n.dataSource),x.Bb(13),x.qc("matHeaderRowDef",n.displayedColumnsStreams),x.Bb(1),x.qc("matRowDefColumns",n.displayedColumnsStreams)}}function Fe(e,t){1&e&&(x.Sb(0,"p",37),x.Nb(1,"i",99),x.Jc(2," Inactive"),x.Rb())}function je(e,t){if(1&e&&(x.Qb(0),x.Jc(1," | "),x.Sb(2,"a",101),x.Jc(3),x.Rb(),x.Pb()),2&e){var n=x.jc(2);x.Bb(2),x.qc("href",n.getDomainAsHttpsLink(),x.Ac),x.Bb(1),x.Kc(n.getDomainAsHttpsLink())}}function Je(e,t){if(1&e){var n=x.Tb();x.Qb(0),x.Jc(1," | "),x.Sb(2,"button",102),x.fc("click",(function(){return x.zc(n),x.jc(2).openSSLForm()})),x.Jc(3,"Change SSL"),x.Rb(),x.Pb()}}function ze(e,t){if(1&e&&(x.Sb(0,"p",37),x.Nb(1,"i",100),x.Jc(2," Active "),x.Hc(3,je,4,2,"ng-container",26),x.Hc(4,Je,4,0,"ng-container",26),x.Rb()),2&e){var n=x.jc();x.Bb(3),x.qc("ngIf",n.serverSettings.sslEnabled&&""!==n.serverSettings.serverName),x.Bb(1),x.qc("ngIf",n.serverSettings.sslEnabled)}}function He(e,t){if(1&e&&(x.Sb(0,"option",32),x.Jc(1),x.Rb()),2&e){var n=x.jc(2);x.rc("value",n.getSslConfigurationTypeName(n.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)),x.Bb(1),x.Kc(n.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)}}function $e(e,t){if(1&e&&(x.Sb(0,"option",108),x.Jc(1),x.Rb()),2&e){var n=x.jc(2);x.rc("value",n.getSslConfigurationTypeName(n.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)),x.Bb(1),x.Lc("",n.ConfigurationTypes.ANTMEDIA_SUBDOMAIN," - Enterprise License Required")}}function Ke(e,t){1&e&&(x.Sb(0,"div",24),x.Sb(1,"p",37),x.Jc(2,"Subdomain of antmedia.cloud will be automatically allocated for you"),x.Rb(),x.Rb())}function We(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div",24),x.Sb(1,"input",109,110),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc(2).fqdn=e})),x.Rb(),x.Rb()}if(2&e){var i=x.jc(2);x.Bb(1),x.qc("ngModel",i.fqdn)}}function Ye(e,t){if(1&e){var n=x.Tb();x.Sb(0,"div"),x.Sb(1,"fieldset"),x.Sb(2,"div",22),x.Sb(3,"div"),x.Sb(4,"label",23),x.Jc(5,"Full Chain File(.crt or .pem)"),x.Rb(),x.Sb(6,"div",111),x.Sb(7,"input",112,113),x.fc("change",(function(e){return x.zc(n),x.jc(2).handleSslCertificateFileInput(e)})),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(9,"fieldset"),x.Sb(10,"div",22),x.Sb(11,"div"),x.Sb(12,"label",23),x.Jc(13,"Key File(.key or .pem)"),x.Rb(),x.Sb(14,"div",111),x.Sb(15,"input",114,113),x.fc("change",(function(e){return x.zc(n),x.jc(2).handleSslCertificateFileInput(e)})),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(17,"fieldset"),x.Sb(18,"div",22),x.Sb(19,"div"),x.Sb(20,"label",23),x.Jc(21,"Chain File(.crt or .pem)"),x.Rb(),x.Sb(22,"div",111),x.Sb(23,"input",115,113),x.fc("change",(function(e){return x.zc(n),x.jc(2).handleSslCertificateFileInput(e)})),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()}}function Qe(e,t){1&e&&x.Nb(0,"i",116)}function Ge(e,t){if(1&e){var n=x.Tb();x.Qb(0),x.Sb(1,"fieldset"),x.Sb(2,"div",22),x.Sb(3,"label",23),x.Jc(4,"Type"),x.Rb(),x.Sb(5,"div",24),x.Sb(6,"select",31,103),x.fc("ngModelChange",(function(e){return x.zc(n),x.jc().sslConfigurationChanged(e)}))("ngModelChange",(function(e){return x.zc(n),x.jc().sslConfType=e})),x.Sb(8,"option",32),x.Jc(9),x.Rb(),x.Hc(10,He,2,2,"option",104),x.Hc(11,$e,2,2,"option",105),x.Sb(12,"option",32),x.Jc(13),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(14,"div",22),x.Sb(15,"fieldset"),x.Sb(16,"label",23),x.Jc(17,"Domain (FQDN)"),x.Rb(),x.Hc(18,Ke,3,0,"div",36),x.Hc(19,We,3,1,"div",36),x.Rb(),x.Rb(),x.Hc(20,Ye,25,0,"div",26),x.Sb(21,"fieldset"),x.Sb(22,"div",33),x.Sb(23,"button",106),x.fc("click",(function(){return x.zc(n),x.jc().configureSsl()})),x.Hc(24,Qe,1,0,"i",107),x.Jc(25,"Activate "),x.Rb(),x.Rb(),x.Rb(),x.Pb()}if(2&e){var i=x.jc();x.Bb(6),x.qc("name","configurationType")("ngModel",i.sslConfType),x.Bb(2),x.rc("value",i.getSslConfigurationTypeName(i.ConfigurationTypes.CUSTOM_DOMAIN)),x.Bb(1),x.Kc(i.ConfigurationTypes.CUSTOM_DOMAIN),x.Bb(1),x.qc("ngIf","Valid"==i.licenseStatus),x.Bb(1),x.qc("ngIf","Valid"!=i.licenseStatus),x.Bb(1),x.rc("value",i.getSslConfigurationTypeName(i.ConfigurationTypes.CUSTOM_CERTIFICATE)),x.Bb(1),x.Kc(i.ConfigurationTypes.CUSTOM_CERTIFICATE),x.Bb(5),x.qc("ngIf",i.sslConfType==i.getSslConfigurationTypeName(i.ConfigurationTypes.ANTMEDIA_SUBDOMAIN)),x.Bb(1),x.qc("ngIf",i.sslConfType==i.getSslConfigurationTypeName(i.ConfigurationTypes.CUSTOM_DOMAIN)||i.sslConfType==i.getSslConfigurationTypeName(i.ConfigurationTypes.CUSTOM_CERTIFICATE)),x.Bb(1),x.qc("ngIf",i.sslConfType==i.getSslConfigurationTypeName(i.ConfigurationTypes.CUSTOM_CERTIFICATE)),x.Bb(3),x.qc("disabled",!i.configureSslEnabled),x.Bb(1),x.qc("ngIf",!i.configureSslEnabled)}}he=$localize(t()),me=$localize(e(),"\ufffd*67:1\ufffd\ufffd#1:1\ufffd","\ufffd/#1:1\ufffd\ufffd/*67:1\ufffd");var Xe,Ve=((Xe=function(){function e(t,n,i,s,a,r,c,o){h(this,e),this.http=t,this.route=n,this.restService=i,this.dialog=s,this.cdr=a,this.router=r,this.dataService=c,this.authService=o,this.httpsPort=5443,this.crtFileExtension="crt",this.keyFileExtension="key",this.pemFileExtension="pem",this.settingsReceived=!1,this.licenseStatus="Getting license status",this.licenseStatusReceiving=!1,this.configureSslEnabled=!0,this.displayWarning=!0,this.isEnterpriseEdition=!1,this.logLevelInfo="INFO",this.logLevelWarn="WARN",this.logLevelError="ERROR",this.logLevelOff="OFF",this.newUserCreating=!1,this.AdminUserType="ADMIN",this.ReadOnlyUserType="READ_ONLY",this.BasicUserType="USER",this.SYSTEM_SCOPE_OF_ACCESS="system",this.displayedColumnsStreams=["email","type","permissions","actions"],this.userListOffset=0,this.pageSize=0,this.userNameEmpty=!1,this.filter="",this.allLicensesUsedError="ALL_LICENSES_ARE_USED",this.noLicenseFounrError="NO_LICENSE_FOUND",this.licenseExpireError="LICENSE_EXPIRED",this.licenseServerRequestError="serverRequestError",this.invalidKeyError="INVALID_KEY",this.licenseBlocked="LICENSE_BLOCKED",this.TRIAL_PERIOD_ENDED="TRIAL_PERIOD_ENDED",this.userRole=localStorage.getItem(B.c).toUpperCase(),this.sslFormActive=!1}return y(e,[{key:"ngOnInit",value:function(){var e=this;this.sslConfType=this.getSslConfigurationTypeName(I.d.CUSTOM_DOMAIN),this.serverSettings=new I.c("",null,!1,this.logLevelInfo,!1),this.currentLicence=new I.b(null,null,null,null,null,null,null),this.callTimer(),this.userDataTable={dataRows:[]},this.restService.getApplications().subscribe((function(t){e.applications=t,console.debug(t)}),(function(e){Object(M.g)(e)}))}},{key:"ngAfterViewInit",value:function(){var e=this;this.restService.isEnterpriseEdition().subscribe((function(t){e.isEnterpriseEdition=t.success,e.getServerSettings()}),(function(e){Object(M.g)(e)})),this.getUserList(this.userListOffset,this.pageSize)}},{key:"ngOnDestroy",value:function(){this.clearTimer()}},{key:"logLevelChanged",value:function(e){e==this.logLevelInfo&&(this.serverSettings.logLevel=this.logLevelInfo),e==this.logLevelWarn&&(this.serverSettings.logLevel=this.logLevelWarn),e==this.logLevelError&&(this.serverSettings.logLevel=this.logLevelError),e==this.logLevelOff&&(this.serverSettings.logLevel=this.logLevelOff)}},{key:"getSslConfigurationTypeName",value:function(e){return Object.keys(I.d).find((function(t){return I.d[t]===e}))}},{key:"sslConfigurationChanged",value:function(e){this.sslConfType=e}},{key:"openSSLForm",value:function(){this.sslFormActive=!0}},{key:"handleSslCertificateFileInput",value:function(e){return t=this,i=regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.target.files[0],t.t0=e.target.id.toString(),t.next="fullChainFileInput"===t.t0?4:"keyFileInput"===t.t0?6:"chainFileInput"===t.t0?8:9;break;case 4:return this.fullChainFile=n,t.abrupt("break",9);case 6:return this.privateKeyFile=n,t.abrupt("break",9);case 8:this.chainFile=n;case 9:case"end":return t.stop()}}),t,this)})),new((n=void 0)||(n=Promise))((function(e,s){function a(e){try{c(i.next(e))}catch(t){s(t)}}function r(e){try{c(i.throw(e))}catch(t){s(t)}}function c(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(a,r)}c((i=i.apply(t,[])).next())}));var t,n,i}},{key:"applyFilter",value:function(e){e=(e=e.trim()).toLowerCase(),this.filter=e,this.dataSource.filter=e}},{key:"changeType",value:function(e){var t=this;e.email!=localStorage.getItem(B.b)?this.dialog.open(W,{data:{email:e.email,type:e.userType,scope:e.scope},width:"400px"}).afterClosed().subscribe((function(e){console.log("The dialog was closed"),t.getUserList(t.userListOffset,t.pageSize)})):$.notify({icon:"ti-alert",message:"You cannot edit yourself. If you want to change password, use the Change Password on the right top menu"},{type:"warning",delay:4e3,placement:{from:"top",align:"right"}})}},{key:"getUserList",value:function(e,t){var n=this;this.restService.getUsers().subscribe((function(e){for(var t in n.userDataTable.dataRows=[],e){var i=[];for(var s in e[t].endPointList)i.push(e[t].endPointList[s]);n.userDataTable.dataRows.push(e[t])}n.dataSource=new q.k(n.userDataTable.dataRows),""==n.filter&&null==n.filter&&null==n.filter||(n.dataSource.filter=n.filter),n.cdr.detectChanges()}),(function(e){Object(M.g)(e)}))}},{key:"callTimer",value:function(){var e=this;console.log("Timer Started"),this.clearTimer(),this.timerId=window.setInterval((function(){e.authService.isAuthenticated&&e.getUserList(e.userListOffset,e.pageSize)}),15e3)}},{key:"clearTimer",value:function(){clearInterval(this.timerId),this.timerId=null}},{key:"getLastLicenseStatus",value:function(){var e=this;this.isEnterpriseEdition&&(this.licenseStatusReceiving=!0,this.restService.getLastLicenseStatus().subscribe((function(t){e.licenseStatusReceiving=!1,e.evaluateLicenseStatus(t)}),(function(e){Object(M.g)(e)})))}},{key:"getLicenseStatus",value:function(){var e=this;return this.licenseStatusReceiving=!0,this.isEnterpriseEdition&&(this.serverSettings.licenceKey=this.serverSettings.licenceKey.trim(),this.restService.getLicenseStatus(this.serverSettings.licenceKey).subscribe((function(t){e.licenseStatusReceiving=!1,e.evaluateLicenseStatus(t)}),(function(e){Object(M.g)(e)}))),this.currentLicence}},{key:"evaluateLicenseStatus",value:function(e){var t="Invalid License";if(this.licenseStatusExplaination="Please validate your license",null!=e&&(this.currentLicence=e),null==this.currentLicence||null==this.currentLicence.licenceId)this.licenseStatus="Invalid",console.log("invalid license"),this.currentLicence.status==this.licenseServerRequestError?(t="Could Not Connect To License Server",this.licenseStatus="Network is unaccessible",this.licenseStatusExplaination="Please check your connection"):this.currentLicence.status==this.licenseExpireError?(this.licenseStatus="Expired",this.licenseStatusExplaination="Your license is expired, please renew your license at antmedia.io"):this.currentLicence.status==this.invalidKeyError||this.currentLicence.status==this.noLicenseFounrError?this.licenseStatusExplaination="Your license key is invalid":this.currentLicence.status==this.licenseBlocked?(this.licenseStatus="Suspended",this.licenseStatusExplaination="Your license is suspended. Please renew your license at antmedia.io"):this.currentLicence.status==this.allLicensesUsedError?this.licenseStatusExplaination="You have reached your licence limit. Please close some of your running instances":this.currentLicence.status==this.TRIAL_PERIOD_ENDED&&(this.licenseStatus="Trial expired",this.licenseStatusExplaination="Your trial period is expired. Please buy a license at antmedia.io or extend your trial"),this.authService.licenceWarningDisplay&&!this.serverSettings.buildForMarket&&swal({title:t,text:this.licenseStatusExplaination,type:"error",confirmButtonColor:"#3085d6",confirmButtonText:"OK",onClose:function(){}}).then((function(){})).catch((function(){}));else{this.licenseStatus="Valid",this.authService.licenceWarningDisplay=!1;var n=this.currentLicence.endDate;this.leftDays=this.differenceInDays((new Date).getTime(),new Date(n).getTime()),this.leftDays<16&&this.authService.licenceWarningDisplay&&(console.log("Your license expires in "+this.leftDays+" days"),swal({title:"Your license expires in "+this.leftDays+" days",text:"Please Renew Your License ",type:"info",confirmButtonColor:"#3085d6",confirmButtonText:"OK",onClose:function(){}}).then((function(){})).catch((function(){})),this.authService.licenceWarningDisplay=!1)}}},{key:"changeServerSettings",value:function(e){var t=this;e&&!this.serverSettings.buildForMarket&&this.isEnterpriseEdition&&(console.log(this.serverSettings),this.restService.changeServerSettings(this.serverSettings).subscribe((function(e){1==e.success?($.notify({icon:"ti-save",message:L.a.getLocaleInterface().license_saved},{type:"success",delay:900,placement:{from:"top",align:"right"}}),t.authService.serverSettings=t.serverSettings,t.authService.licenceWarningDisplay=!0,t.serverSettings.buildForMarket||t.getLicenseStatus()):$.notify({icon:"ti-alert",message:L.a.getLocaleInterface().settings_not_saved},{type:"warning",delay:1900,placement:{from:"top",align:"right"}})}),(function(e){Object(M.g)(e)})))}},{key:"newUser",value:function(){this.newUserActive=!0,this.userNameEmpty=!1,this.User=new M.f("","")}},{key:"isValidDomain",value:function(e){var t=new RegExp(/^(?!-)[A-Za-z0-9-]+([\-\.]{1}[a-z0-9]+)*\.[A-Za-z]{2,}$/);return null!=e&&!!t.test(e)}},{key:"getDomainAsHttpsLink",value:function(){return"https://"+this.serverSettings.serverName+":"+this.httpsPort}},{key:"certificateFilesReady",value:function(){return null!=this.fullChainFile&&null!=this.chainFile&&null!=this.privateKeyFile}},{key:"configureSsl",value:function(){var e=this;this.sslConfType!=this.getSslConfigurationTypeName(I.d.CUSTOM_DOMAIN)&&this.sslConfType!=this.getSslConfigurationTypeName(I.d.CUSTOM_CERTIFICATE)||this.isValidDomain(this.fqdn)?this.sslConfType!=this.getSslConfigurationTypeName(I.d.CUSTOM_CERTIFICATE)||this.certificateFilesReady()?swal({title:"Confirmation",text:"Server will be restarted automatically after this operaiton",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Proceed"}).then((function(){$.notify({icon:"ti-info",message:"SSL configuration has started. Please wait a minute..."},{type:"info",delay:5e3,placement:{from:"top",align:"right"}}),e.configureSslEnabled=!1;var t=new FormData;t.append("fullChainFile",e.fullChainFile),t.append("privateKeyFile",e.privateKeyFile),t.append("chainFile",e.chainFile),e.restService.changeSslSettings(e.fqdn,e.sslConfType,t).subscribe((function(e){$.notify({icon:"ti-info",message:"SSL configuration completed. Please refresh the page and login again."},{type:"success",delay:3500,placement:{from:"top",align:"right"}})}),(function(t){console.log("SSL problem"),console.log(t),e.configureSslEnabled=!0}))})).catch((function(){})):alert("Please enter certificate files"):alert("Please enter a valid domain.")}},{key:"cancelNewUser",value:function(){this.newUserActive=!1}},{key:"deleteUser",value:function(e){var t=this;localStorage.getItem(B.b)!=e?swal({title:L.a.getLocaleInterface().are_you_sure,text:L.a.getLocaleInterface().wont_be_able_to_revert,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(n){t.restService.deleteUser(e).subscribe((function(e){1==e.success?$.notify({icon:"ti-save",message:"Successfully deleted"},{type:"success",delay:900,placement:{from:"top",align:"right"}}):$.notify({icon:"ti-alert",message:"User is not deleted"},{type:"warning",delay:900,placement:{from:"top",align:"right"}}),t.getUserList(t.userListOffset,t.pageSize)}),(function(e){Object(M.g)(e)}))})):$.notify({icon:"ti-save",message:"You cannot delete yourself"},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}},{key:"createUser",value:function(e){var t=this;console.log("create user called"),this.userNameEmpty=!1,e?(console.log("create user called 2"),this.restService.checkStreamName(this.User.email)?(console.log("create user called 3"),this.newUserCreating=!0,this.restService.createUser(this.User).subscribe((function(e){console.log("data :"+JSON.stringify(e)),1==e.success?(t.newUserActive=!1,$.notify({icon:"ti-save",message:L.a.getLocaleInterface().new_user_created},{type:"success",delay:900,placement:{from:"top",align:"right"}}),t.getUserList(t.userListOffset,t.pageSize),t.User.fullName=""):$.notify({icon:"ti-alert",message:"User is not created. "+e.message},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}),(function(e){Object(M.g)(e)})),this.newUserCreating=!1):this.userNameEmpty=!0):console.log("Form is not valid")}},{key:"getServerSettings",value:function(){var e=this;this.restService.getServerSettings().subscribe((function(t){e.serverSettings=t,console.log(e.serverSettings),e.settingsReceived=!0,e.sslFormActive=!e.serverSettings.sslEnabled,e.serverSettings.buildForMarket||e.getLastLicenseStatus()}),(function(e){Object(M.g)(e)}))}},{key:"differenceInDays",value:function(e,t){return Math.round((t-e)/864e5)}},{key:"messageReceived",get:function(){return this._messageReceived},set:function(e){this._messageReceived=e}},{key:"ConfigurationTypes",get:function(){return I.d}}]),e}()).\u0275fac=function(e){return new(e||Xe)(x.Mb(ne.b),x.Mb(ie.a),x.Mb(M.e),x.Mb(N.b),x.Mb(x.h),x.Mb(ie.c),x.Mb(U.a),x.Mb(B.a))},Xe.\u0275cmp=x.Gb({type:Xe,selectors:[["server",8,"settings"]],viewQuery:function(e,t){var n;1&e&&x.Oc(ae,!0),2&e&&x.wc(n=x.gc())&&(t.sslConfigurationSelect=n.first)},attrs:re,decls:39,vars:8,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-sm-12"],[1,"card"],[1,"card-content"],[1,"nav-tabs-navigation"],[1,"nav-tabs-wrapper"],["id","tabs","data-tabs","tabs",1,"nav","nav-tabs"],["href","#licence","data-toggle","tab",1,"active"],["href","#users","data-toggle","tab"],["href","#ssl","data-toggle","tab"],["id","my-tab-content",1,"tab-content","text-center"],["class","tab-pane active","id","licence",4,"ngIf"],["id","users",1,"tab-pane","container-fluid"],[1,"text-right",2,"float","right"],["class","btn btn-fill btn-success","role","button",3,"click",4,"ngIf"],["class","card",4,"ngIf"],["style","display: flex; justify-content: flex-end",4,"ngIf"],["id","broadcastTable","style","text-align: left;",4,"ngIf"],["id","ssl",1,"tab-pane","container-fluid"],[1,"form-horizontal"],[1,"form-group"],[1,"col-sm-2","control-label"],[1,"col-sm-10"],["class","form-control-static text-left",4,"ngIf"],[4,"ngIf"],["id","licence",1,"tab-pane","active"],["method","post",1,"form-horizontal",3,"ngSubmit"],["f","ngForm"],["class","form-group text-left",4,"ngIf"],["type","text","required","",1,"dropdown-toggle","form-control",3,"name","ngModel","ngModelChange"],[3,"value"],[1,"form-group","text-center"],["type","submit",1,"btn","btn-fill","btn-info"],[1,"form-group","text-left"],["class","col-sm-10",4,"ngIf"],[1,"form-control-static","text-left"],["aria-hidden","true",1,"fa","fa-spinner","fa-pulse","fa-1x","fa-fw"],[1,"fa","fa-circle","text-muted",2,"color","#98000d"],[1,"form-control-static"],[1,"ti-check",2,"color","#199826","font-size","1.1em"],[1,"col-sm-10","text-left"],["type","text","required","","minlength","1","name","licenseKey","placeholder","Write your license key",1,"form-control",3,"ngModel","ngModelChange"],["licenseKey","ngModel"],[1,"text-danger",3,"hidden"],["target","_blank","matTooltip","Please click it for more usage detail",3,"href"],[1,"fa","fa-info-circle"],["aria-hidden","true",1,"ti-alarm-clock",2,"color","#199826","font-size","1.1em"],["role","button",1,"btn","btn-fill","btn-success",3,"click"],["method","post","validate","",3,"ngSubmit"],[1,"card-header"],[1,"card-title","text-left"],[1,"card-content","text-left"],[1,"star"],["type","text","name","firstName","required","","minlength","2",1,"form-control","input-no-border",3,"ngModel","ngModelChange"],["firstName","ngModel"],["type","text","name","lastName","required","","minlength","2",1,"form-control","input-no-border",3,"ngModel","ngModelChange"],["lastName","ngModel"],["type","text","required","","minlength","4","name","newUserName","placeholder","Username","pattern","[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,16}$",1,"form-control",3,"ngModel","ngModelChange"],["newUserName","ngModel"],["type","password","required","","minlength","6","name","Password","autocomplete","new-password","placeholder","Password","validateEqual","confirmPassword","reverse","true",1,"form-control",3,"ngModel","ngModelChange"],["Password","ngModel"],["type","password","required","","minlength","6","name","confirmPassword","autocomplete","new-password","reverse","false","validateEqual","Password",1,"form-control",3,"ngModel","ngModelChange",6,"placeholder"],["confirmPassword","ngModel"],["matTooltip","ADMIN user can do anything in their scope. USER can CRUD live streams/upload VoDs in their scope except they cannot change settings/users/applications. READ_ONLY user can only read in their scope",1,"fa","fa-info-circle"],["matTooltip","'Everything' is access to applications/logs/settings. Application specific access is access to the related app",1,"fa","fa-info-circle"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-fill","btn-success",2,"margin","15px",3,"disabled"],["class","fa fa-spinner fa-pulse fa-1x fa-fw","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-simple",3,"click"],[2,"display","flex","justify-content","flex-end"],[1,"mat-header"],["placeholder","Search",3,"keyup"],["id","broadcastTable",2,"text-align","left"],[1,"mat-container","mat-elevation-z0"],["matSort","",2,"overflow","visible !important",3,"dataSource"],["matColumnDef","email"],["mat-sort-header","",3,"ngClass",4,"matHeaderCellDef"],[3,"ngClass",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","permissions"],["matColumnDef","actions"],["class","justify-flex-end",4,"matHeaderCellDef"],["class","justify-flex-end",4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["mat-sort-header","",3,"ngClass"],[3,"ngClass"],[2,"padding-left","12px"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"justify-flex-end"],["title","Change Type","data-toggle","tooltip","type","button",1,"btn","btn-simple","btn-magnify","btn-info","btn-xs","big-icons",3,"click"],[1,"btn-label"],[1,"ti-pencil"],["type","button",1,"btn","btn-simple","btn-magnify","btn-danger","btn-xs","big-icons",3,"click"],[1,"ti-close"],[1,"fa","fa-times",2,"color","#98000d"],[1,"fa","fa-check",2,"color","#199826"],[3,"href"],["type","button",1,"btn","btn-simple",2,"padding-left","3px",3,"click"],["sslConfigurationSelect",""],[3,"value",4,"ngIf"],["disabled","true",3,"value",4,"ngIf"],["type","submit",1,"btn","btn-fill","btn-info",3,"disabled","click"],["class","fa fa-spinner fa-pulse  fa-fw",4,"ngIf"],["disabled","true",3,"value"],["type","text","required","","minlength","1","name","sslDomain","placeholder","Type your domain",1,"form-control",3,"ngModel","ngModelChange"],["sslDomain","ngModel"],[1,"col-sm-5"],["type","file","id","fullChainFileInput",3,"change"],["sslFileInput",""],["type","file","id","keyFileInput",3,"change"],["type","file","id","chainFileInput",3,"change"],[1,"fa","fa-spinner","fa-pulse","fa-fw"]],template:function(e,t){1&e&&(x.Sb(0,"div",0),x.Sb(1,"div",1),x.Sb(2,"div",2),x.Sb(3,"div",3),x.Sb(4,"div",4),x.Sb(5,"div",5),x.Sb(6,"div",6),x.Sb(7,"div",7),x.Sb(8,"ul",8),x.Sb(9,"li"),x.Sb(10,"a",9),x.Wb(11,Y),x.Rb(),x.Rb(),x.Sb(12,"li"),x.Sb(13,"a",10),x.Wb(14,Q),x.Rb(),x.Rb(),x.Sb(15,"li"),x.Sb(16,"a",11),x.Jc(17,"SSL"),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Sb(18,"div",12),x.Hc(19,ve,28,15,"div",13),x.Sb(20,"div",14),x.Sb(21,"div",15),x.Hc(22,Se,2,0,"button",16),x.Rb(),x.Hc(23,we,70,24,"div",17),x.Hc(24,Ee,3,0,"div",18),x.Hc(25,De,17,3,"div",19),x.Sb(26,"p"),x.Jc(27,"\xa0"),x.Rb(),x.Rb(),x.Sb(28,"div",20),x.Sb(29,"div"),x.Sb(30,"form",21),x.Sb(31,"fieldset"),x.Sb(32,"div",22),x.Sb(33,"label",23),x.Jc(34,"SSL Status"),x.Rb(),x.Sb(35,"div",24),x.Hc(36,Fe,3,0,"p",25),x.Hc(37,ze,5,2,"p",25),x.Rb(),x.Rb(),x.Rb(),x.Hc(38,Ge,26,13,"ng-container",26),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb(),x.Rb()),2&e&&(x.Bb(19),x.qc("ngIf",t.settingsReceived),x.Bb(3),x.qc("ngIf",t.userRole!==t.ReadOnlyUserType),x.Bb(1),x.qc("ngIf",t.newUserActive),x.Bb(1),x.qc("ngIf",t.userDataTable.dataRows.length>0),x.Bb(1),x.qc("ngIf",t.userDataTable.dataRows.length>0),x.Bb(11),x.qc("ngIf",!t.serverSettings.sslEnabled),x.Bb(1),x.qc("ngIf",t.serverSettings.sslEnabled),x.Bb(1),x.qc("ngIf",t.sslFormActive))},directives:[A.o,k.x,k.l,k.m,k.u,k.t,k.k,k.n,k.o,k.w,k.d,k.g,se.a,k.q,O,A.n,q.j,q.c,q.e,q.b,q.g,q.i,q.d,A.m,q.a,A.q,A.r,A.s,q.f,q.h],encapsulation:2}),Xe.\u0275prov=x.Ib({token:Xe,factory:Xe.\u0275fac}),Xe)}}])}();