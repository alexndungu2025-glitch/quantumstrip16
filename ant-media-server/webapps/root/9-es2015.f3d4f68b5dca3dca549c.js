(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{W7GC:function(e,t){},iNK9:function(e,t,a){"use strict";a.r(t),a.d(t,"ClusterRoutes",(function(){return de})),a.d(t,"ClusterModule",(function(){return ue}));var n,c,i=a("tyNb"),o=a("ofXK"),s=a("3Pt+"),l=a("tk/3"),b=a("BWpK"),r=a("XGgE"),d=a("Dh3D"),u=a("+0xr"),f=(a("EUDy"),a("W7GC"),a("U/Bw")),m=a("fXoL"),g=a("0IaG"),h=a("M9IT");function p(e,t){1&e&&(m.Sb(0,"mat-header-cell"),m.Jc(1," Node IP "),m.Rb())}function S(e,t){if(1&e&&(m.Sb(0,"mat-cell"),m.Jc(1),m.Rb()),2&e){const e=t.$implicit;m.Bb(1),m.Lc(" ",e.ip," ")}}function C(e,t){1&e&&(m.Sb(0,"mat-header-cell"),m.Jc(1," CPU(%) "),m.Rb())}function w(e,t){if(1&e&&(m.Sb(0,"mat-cell"),m.Jc(1),m.Rb()),2&e){const e=t.$implicit;m.Bb(1),m.Lc(" ",e.cpu," ")}}function R(e,t){1&e&&(m.Sb(0,"mat-header-cell"),m.Jc(1," Memory(MB) - Used/Total "),m.Nb(2,"br"),m.Rb())}function N(e,t){if(1&e&&(m.Sb(0,"mat-cell"),m.Jc(1),m.Rb()),2&e){const e=t.$implicit;m.Bb(1),m.Lc(" ",e.memory," ")}}function v(e,t){1&e&&(m.Sb(0,"mat-header-cell"),m.Jc(1," Last Heartbeat "),m.Rb())}function I(e,t){if(1&e&&(m.Sb(0,"mat-cell"),m.Jc(1),m.kc(2,"date"),m.Rb()),2&e){const e=t.$implicit;m.Bb(1),m.Lc(" ",m.mc(2,1,e.lastUpdateTime,"yyyy-MM-dd HH:mm:ss")," ")}}function D(e,t){1&e&&(m.Sb(0,"mat-header-cell"),m.Jc(1,"Status "),m.Rb())}function H(e,t){1&e&&(m.Qb(0),m.Nb(1,"span",22),m.Jc(2,"\xa0 Live "),m.Pb())}function z(e,t){1&e&&(m.Nb(0,"span",23),m.Jc(1,"\xa0 Inaccessible "))}function y(e,t){if(1&e&&(m.Sb(0,"mat-cell"),m.Hc(1,H,3,0,"ng-container",20),m.Hc(2,z,2,0,"ng-template",null,21,m.Ic),m.Rb()),2&e){const e=t.$implicit,a=m.xc(3);m.Bb(1),m.qc("ngIf","alive"==e.status)("ngIfElse",a)}}function T(e,t){1&e&&(m.Sb(0,"mat-header-cell"),m.Jc(1," Actions"),m.Rb())}function M(e,t){if(1&e){const e=m.Tb();m.Sb(0,"mat-cell"),m.Sb(1,"button",24),m.fc("click",(function(){m.zc(e);const a=t.$implicit;return m.jc(2).deleteNode(a.id)})),m.Sb(2,"span",25),m.Nb(3,"i",26),m.Rb(),m.Qb(4),m.Wb(5,n),m.Pb(),m.Rb(),m.Rb()}}function O(e,t){1&e&&m.Nb(0,"mat-header-row")}function x(e,t){1&e&&m.Nb(0,"mat-row")}function B(e,t){if(1&e){const e=m.Tb();m.Sb(0,"div",6),m.Sb(1,"div",7),m.Sb(2,"mat-table",8),m.Qb(3,9),m.Hc(4,p,2,0,"mat-header-cell",10),m.Hc(5,S,2,1,"mat-cell",11),m.Pb(),m.Qb(6,12),m.Hc(7,C,2,0,"mat-header-cell",10),m.Hc(8,w,2,1,"mat-cell",11),m.Pb(),m.Qb(9,13),m.Hc(10,R,3,0,"mat-header-cell",10),m.Hc(11,N,2,1,"mat-cell",11),m.Pb(),m.Qb(12,14),m.Hc(13,v,2,0,"mat-header-cell",10),m.Hc(14,I,3,4,"mat-cell",11),m.Pb(),m.Qb(15,15),m.Hc(16,D,2,0,"mat-header-cell",10),m.Hc(17,y,4,2,"mat-cell",11),m.Pb(),m.Qb(18,16),m.Hc(19,T,2,0,"mat-header-cell",10),m.Hc(20,M,6,0,"mat-cell",11),m.Pb(),m.Hc(21,O,1,0,"mat-header-row",17),m.Hc(22,x,1,0,"mat-row",18),m.Rb(),m.Sb(23,"mat-paginator",19),m.fc("page",(function(t){return m.zc(e),m.jc().onPaginateChange(t)})),m.Rb(),m.Rb(),m.Rb()}if(2&e){const e=m.jc();m.Bb(2),m.qc("dataSource",e.dataSourceNode),m.Bb(19),m.qc("matHeaderRowDef",e.nodeColumns),m.Bb(1),m.qc("matRowDefColumns",e.nodeColumns),m.Bb(1),m.qc("length",e.nodeLength)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)}}function P(e,t){1&e&&(m.Sb(0,"div",27),m.Sb(1,"div",28),m.Sb(2,"p"),m.Wb(3,c),m.Rb(),m.Rb(),m.Rb())}n=$localize`:@@deleteNodeButton␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,c=$localize`:no cluster node | text messages appears when no node@@noNodeExistsMessage␟f62e8e254076975df05ec10d10b9e92169c26b8d␟2757926870653264881: There is no cluster node. `;let J=(()=>{class e{constructor(e,t,a,n,c,i,o,s){this.http=e,this.route=t,this.clusterRestService=a,this.renderer=n,this.router=c,this.dialog=i,this.cdr=o,this.matpage=s,this.nodeColumns=["nodeIp","cpu","memory","lastUpdateTime","inTheCluster","actions"],this.pageSize=10,this.pageSizeOptions=[10,25,50],this.pageIndex=0,this.currentOffset=0,this.dataSourceNode=new u.k}setPageSizeOptions(e){this.pageSizeOptions=e.split(",").map(e=>+e)}ngOnInit(){this.nodeTableData={dataRows:[]}}onPaginateChange(e){console.log("cluster page index:"+e.pageIndex+" length: "+e.length+" pageSize:"+e.pageSize),this.pageIndex=e.pageIndex,this.pageSize=e.pageSize,this.currentOffset=e.pageIndex*this.pageSize,this.getClusterNodes(this.currentOffset,this.pageSize)}ngAfterViewInit(){this.getClusterNodeCount(),this.getClusterNodes(0,this.pageSize),this.timerId=window.setInterval(()=>{this.getClusterNodeCount(),this.getClusterNodes(this.currentOffset,this.pageSize)},1e4)}ngOnDestroy(){this.timerId&&clearInterval(this.timerId)}getClusterNodeCount(){this.clusterRestService.getClusterNodeCount().subscribe(e=>{this.nodeLength=e.number},e=>{Object(f.g)(e)})}getClusterNodes(e,t){this.clusterRestService.getClusterNodes(e,t).subscribe(e=>{for(var t in this.nodeTableData.dataRows=[],e)this.nodeTableData.dataRows.push(e[t]);this.dataSourceNode=new u.k(this.nodeTableData.dataRows)},e=>{Object(f.g)(e)})}deleteNode(e){swal({title:r.a.getLocaleInterface().are_you_sure,text:r.a.getLocaleInterface().wont_be_able_to_revert,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(()=>{let t=this.nodeTableData.dataRows.find(t=>t.id==e);this.clusterRestService.deleteClusterNodes(t).subscribe(e=>{1==e.success||this.showNodeNotDeleted(),this.getClusterNodes(this.currentOffset,this.pageSize)},e=>{Object(f.g)(e)})}).catch((function(){}))}showNodeNotDeleted(){$.notify({icon:"ti-save",message:"Node can not be deleted."},{type:"warning",delay:900,placement:{from:"top",align:"right"}})}}return e.\u0275fac=function(t){return new(t||e)(m.Mb(l.b),m.Mb(i.a),m.Mb(b.a),m.Mb(m.G),m.Mb(i.c),m.Mb(g.b),m.Mb(m.h),m.Mb(h.b))},e.\u0275cmp=m.Gb({type:e,selectors:[["app-cluster"]],viewQuery:function(e,t){var a;1&e&&m.Oc(d.a,!0),2&e&&m.wc(a=m.gc())&&(t.sort=a.first)},inputs:{pageEvent:"pageEvent"},outputs:{pageChange:"pageChange"},decls:6,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12","col-sm-12"],["id","nodeTable","style","text-align: left",4,"ngIf"],["class","card",4,"ngIf"],["id","nodeTable",2,"text-align","left"],[1,"mat-container","mat-elevation-z1"],[3,"dataSource"],["matColumnDef","nodeIp"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","cpu"],["matColumnDef","memory"],["matColumnDef","lastUpdateTime"],["matColumnDef","inTheCluster"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"length","pageSize","pageSizeOptions","page"],[4,"ngIf","ngIfElse"],["showDead",""],[1,"dot","btn-success"],[1,"dot","btn-danger"],["type","button",1,"btn","btn-simple","btn-magnify","btn-danger",3,"click"],[1,"btn-label"],[1,"ti-close"],[1,"card"],[1,"card-content","text-center"]],template:function(e,t){1&e&&(m.Sb(0,"div",0),m.Sb(1,"div",1),m.Sb(2,"div",2),m.Sb(3,"div",3),m.Hc(4,B,24,6,"div",4),m.Hc(5,P,4,0,"div",5),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&e&&(m.Bb(4),m.qc("ngIf",t.nodeTableData.dataRows.length>0),m.Bb(1),m.qc("ngIf",0==t.nodeTableData.dataRows.length))},directives:[o.o,u.j,u.c,u.e,u.b,u.g,u.i,h.a,u.d,u.a,u.f,u.h],pipes:[o.f],styles:[".dot[_ngcontent-%COMP%]{height:12px;width:12px;border-radius:50%;display:inline-block}"]}),e})();var k=a("zkoq"),L=a("NFeN"),q=a("qFsG"),Q=a("MutI"),j=a("STbY"),E=a("FKr1"),G=a("d3UM"),U=a("QibW"),W=a("Xa2L"),_=a("bv9b"),K=a("Qu3c"),X=a("/t3+"),A=a("wZkO"),F=a("xHqg"),V=a("dNgK"),Y=a("1jcm"),Z=a("5RNC"),ee=a("XhcP"),te=a("/1cH"),ae=a("bTqV"),ne=a("jaxi"),ce=a("Wp6s"),ie=a("bSwM"),oe=a("A5z7"),se=a("iadO"),le=a("f0Cb"),be=a("7EHt"),re=a("kmnG");const de=[{path:"",component:J,pathMatch:"full"}];let ue=(()=>{class e{}return e.\u0275mod=m.Kb({type:e}),e.\u0275inj=m.Jb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(de),o.c,re.d,q.b,ie.b,g.f,s.f,l.c,g.f,ie.b,q.b,te.a,ae.b,ne.a,ce.a,oe.a,se.a,le.a,be.a,k.b,L.b,Q.d,j.a,E.m,h.c,_.a,W.a,U.a,E.t,G.b,ee.a,Z.a,Y.a,V.a,d.c,F.a,u.l,A.a,X.a,K.b],ie.b,g.f,re.d,q.b,g.f,ie.b,re.d,q.b,te.a,ae.b,ne.a,ce.a,oe.a,se.a,le.a,be.a,k.b,L.b,Q.d,j.a,E.m,h.c,_.a,W.a,U.a,E.t,G.b,ee.a,Z.a,Y.a,V.a,d.c,F.a,u.l,A.a,X.a,K.b]}),e})()}}]);